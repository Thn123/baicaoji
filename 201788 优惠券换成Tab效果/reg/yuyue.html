<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" name="viewport" /> 
<meta content="yes" name="apple-mobile-web-app-capable" /> 
<meta content="black" name="apple-mobile-web-app-status-bar-style" /> 
<meta content="telephone=no" name="format-detection" />
<link type="text/css" href="css/reg.css" rel="stylesheet" />
<title>佰草集门店预约查询</title>
</head>

<body>
<div class="baicaojiOrder">
  <div class="baicaojiDian"><h2><span>上海 | 美罗城店</span></h2></div>
  
  <div class="order-date-item" id="order-datelist">
  </div>
</div>

<div class="baicaojiOrder-list">
  <ul>
    <li>
      <div class="orderbian">订单编号：2017060715002432423</div>
       <div class="orderCon">
         <p>预约人：张小萌</p>
          <p>手机号：<a href="javacript:void(0);" onClick="javacript:modifyTel('18566668989')"><span>18566668989</span></a></p>
           <p>预约时间：2017/05/22 15:00</p>
       </div>
        <div class="orderBtn">
          <span onClick="javascript:modifyTime('2017-05-22','15:00','2017060715002432421');">修改</span>
           <span>取消</span>
            <span class="queren">确认</span>
        </div>
    </li>
     <li>
      <div class="orderbian">订单编号：2017060715002432421</div>
       <div class="orderCon">
         <p>预约人：张小萌</p>
          <p>手机号：<a href="javacript:void(0);" onClick="javacript:modifyTel('18566668989')"><span>18566668989</span></a></p>
           <p onClick="javascript:modifyTime('2017-06-01','15:00','2017060715002432421');">预约时间：2017/06/01 15:00</p>
       </div>
        <div class="orderBtn">
          
            <span class="yiqueren">已确认</span>
        </div>
    </li>
    
     <li>
      <div class="orderbian">订单编号：2017060715002432422</div>
       <div class="orderCon">
         <p>预约人：张小萌</p>
          <p>手机号：<a href="javacript:modifyTel('18566668989')"><span>18566668989</span></a></p>
           <p onClick="javascript:modifyTime('2017-06-07','15:00','2017060715002432422');">预约时间：2017/06/07 15:00</p>
       </div>
        <div class="orderBtn">
        
            <span class="queren">确认</span>
        </div>
    </li>
    <li>
      <div class="orderbian">订单编号：2017060715002432423</div>
       <div class="orderCon">
         <p>预约人：张小萌</p>
          <p>手机号：<a href="tel:18566668989"><span>18566668989</span></a></p>
           <p onClick="javascript:modifyTime('2017-06-07','15:00','2017060715002432423');">预约时间：2017/06/07 15:00</p>
       </div>
        <div class="orderBtn">
        
            <span class="queren">确认</span>
        </div>
    </li>
    
    <li>
      <div class="orderbian">订单编号：2017060715002432423</div>
       <div class="orderCon">
         <p>预约人：张小萌</p>
          <p>手机号：<a href="javacript:void(0);" onClick="javacript:modifyTel('18566668989')"><span>18566668989</span></a></p>
           <p onClick="javascript:modifyTime('2017-06-07','15:00','2017060715002432423');">预约时间：2017/06/07 15:00</p>
       </div>
        <div class="orderBtn">
        
            <span class="queren">确认</span>
        </div>
    </li>
    
    <li>
      <div class="orderbian">订单编号：2017060715002432423</div>
       <div class="orderCon">
         <p>预约人：张小萌</p>
          <p>手机号：<a href="javacript:modifyTel('18566668989')"><span>18566668989</span></a></p>
           <p onClick="javascript:modifyTime('2017-06-07','15:00','2017060715002432421');">预约时间：2017/06/07 15:00</p>
       </div>
        <div class="orderBtn">
        
            <span class="queren">确认</span>
        </div>
    </li>
  </ul>
</div>

<div class="subnav" id="subnavid">
  <ul>
     <li>上海 | 美罗城店</li>
     <li>上海 | 美罗城店</li>
     <li>上海 | 其他门店</li>
     <li>上海 | 其他门店</li>
      <li>上海 | 其他门店</li>
       <li>上海 | 其他门店</li>
        <li>上海 | 其他门店</li>
         <li>上海 | 其他门店</li>
  </ul>
</div> 

</body>
</html>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript">

$('.baicaojiDian').on('click',function(){
  $('#subnavid').show();
  $('#subnavid ul li').on('click',function(){
     $(this).addClass('curhover').siblings().removeClass('curhover');
	 $('.baicaojiDian span').html($(this).html()); 	
	
	 setTimeout(function(){
	   $('#subnavid').hide();
	  },10)
  })
})


function setCookie(name,value)
{
    var Days = 30;
    var exp = new Date();
    exp.setTime(exp.getTime() + Days*24*60*60*1000);
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
}

//cookies
function getCookie(name){
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)"); 
    if(arr=document.cookie.match(reg)) 
        return unescape(arr[2]);
    else
        return "";
}
 var rilihtml=rilihtml2=today='';
 var now = new Date();
 var arrWeek=['日','一','二','三','四','五','六'];
  var days = now.getDate();
		var months = now.getMonth() + 1;
		var weeks = now.getDay(); 
	
		//未来三天
		for(var i=1;i<4;i++){
			var date = new Date(now.getTime() + i * 24 * 3600 * 1000);
			var day = date.getDate();
			if(day<10){
			  day= '0'+day;	
			}
			var week = date.getDay(); 
			
			 var datas=[['weizhi-icon','上班'],['weizhi-icon','上班'],['weizhi-icon','休息']];
			rilihtml+=' <ol><bdo>'+arrWeek[week]+'</bdo><div class="'+datas[i-1][0]+'"><span><em>'+day+'</em></span>'+datas[i-1][1]+'</div></ol>';
     	}
		//过去三天
		for(var i=3;i>0;i--){
			var dateguo = new Date(now.getTime() - i * 24 * 3600 * 1000);
			var dayguo = dateguo.getDate();
			if(day<10){
			  day= '0'+day;	
			} 
		    var weekguo = dateguo.getDay(); 
		    var datas=[['duanxiu-icon','6单'],['duanxiu-icon','2单'],['duanxiu-icon','2单']];
		    rilihtml2+=' <ol><bdo>'+arrWeek[weekguo]+'</bdo><div class="'+datas[i-1][0]+'"><span><em>'+dayguo+'</em></span>'+datas[i-1][1]+'</div></ol>';
		}
		var days= now.getDate();
		if(days<10){
		  days= '0'+days;	
		}
		//今天 
		 var todaydatas=[['quanxiu-icon','3单']];
		 today ='<ol><bdo>'+arrWeek[weeks]+'</bdo><div class="'+todaydatas[0][0]+'"><span><em>'+days+'</em></span>'+todaydatas[0][1]+'</div></ol>';

		$('#order-datelist').html(rilihtml2 +today+ rilihtml);
		
		$('#order-datelist').find('ol').on('click',function(){
			$('#order-datelist ol div').removeClass('quanxiu-icon');
			$(this).find('div').addClass('quanxiu-icon');
		    alert('你选择了'+months+'月'+$(this).find('em').html());
		})
		
	
	
var loginflag=true,docHeight;
window.onscroll=function(){docHeight=$(window).scrollTop();}
function loginGo(layout,id){
	console.log(docHeight);
	
	 setCookie('screenid',docHeight);
	 document.documentElement.style.position=document.body.style.position='relative';
     document.documentElement.style.overflow=document.body.style.overflow='hidden';
	 document.documentElement.style.height=document.body.style.height=$(window).height()+'px';
	 if(loginflag==true){
		var loginDiv=document.createElement('div');
		loginDiv.id="loginBox"; 
		document.body.appendChild(loginDiv);
		loginflag=false;
	 }
	 document.getElementById('loginBox').innerHTML=layout;
	 $('.maskbg').addClass('bgdong');
	 $('.login-lrlz-box').show();;
}

function closedLogin(){
	  $('.login-lrlz-box').hide();
	 setTimeout(function(){
		$('#tanceng').remove();
		
	  },1)
	  document.documentElement.style.position=document.body.style.position='static';
	  document.documentElement.style.overflow=document.body.style.overflow='';
	  document.documentElement.style.height=document.body.style.height='';
	  $(window).scrollTop(getCookie('screenid'));
	  console.log(getCookie('screenid'));
}
function boda(dates,times,bianhao){
	var phone='<div id="tanceng"><div class="layoutMaskbg" onClick="javascript:closedLogin();" style="z-index:999980;"></div>\
		<div class="login-lrlz-box">\
			<h2>预约时间修改</h2>\
			<div class="login-lrlz-input">\
			  <p class="orderbian">订单编号：'+bianhao+'</p>\
			  <div class="acc-login-input">\
    <ul class="biaoCss">\
        <li><input name="dateInput" type="date" class="dropdown-txt" value="'+dates+'"></li>\
        <li><select class="dropdown-select"><option>请选择时间点</option><option>9:00</option><option>9:30</option></select></li>\
    </ul>\
			</div></div>\
		<div class="login-lrlz-btn"><ol><span class="quxiaobtn" onClick="javascript:closedLogin();">取消</span></ol><ol><span class="subbtn">确认</span></ol></div>\
	</div></div>';
  return phone;
}

function phonCall(tel){
	var phone='<div id="tanceng"><div class="layoutMaskbg" onClick="javascript:closedLogin();" style="z-index:999980;"></div>\
		<div class="login-lrlz-box">\
			<div class="login-lrlz-input">\
			  <p class="callPhone">确定要拨打电话吗？<span>'+tel+' &nbsp;&nbsp;</span></p>\
			 </div>\
		<div class="login-lrlz-btn"><ol><span class="quxiaobtn" onClick="javascript:closedLogin();">取消</span></ol><ol><a href="tel:'+tel+'"><span class="subbtn">确定拨打</span></a></ol></div>\
	</div></div>';
  return phone;
}

function modifyTime(dates,times,bianhao){
  loginGo(boda(dates,times,bianhao));
}

function modifyTel(tel){
  loginGo(phonCall(tel));
}
		
</script>
